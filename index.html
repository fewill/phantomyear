<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Phantom Year</title>
    <style>
        body {
            font-family: Georgia, serif;
            font-size: 20px;
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #1a1a1a;
            color: #e0e0e0;
        }
        h1 {
            color: #9370db;
            text-align: center;
            font-size: 2.5em;
            margin-bottom: 0.5em;
        }
        h2 {
            color: #ba55d3;
            margin-top: 2em;
            border-bottom: 2px solid #483d8b;
            padding-bottom: 0.3em;
        }
        .intro {
            font-size: 1.2em;
            text-align: center;
            margin: 2em 0;
        }
        .highlight {
            background-color: #2d2d2d;
            border-left: 4px solid #9370db;
            padding: 15px;
            margin: 1.5em 0;
        }
        .next-sighting {
            text-align: center;
            font-size: 1.3em;
            background-color: #2d2d2d;
            padding: 20px;
            border-radius: 10px;
            margin: 2em 0;
            border: 2px solid #9370db;
        }
        .sighting-nav {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 10px;
        }
        .nav-btn {
            background-color: #483d8b;
            color: #e0e0e0;
            border: none;
            padding: 8px 12px;
            border-radius: 5px;
            cursor: pointer;
            font-family: Georgia, serif;
            font-size: 0.85em;
            min-width: 90px;
            transition: background-color 0.2s, opacity 0.2s;
        }
        .nav-btn:hover:not(:disabled) {
            background-color: #6a5acd;
        }
        .nav-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }
        .current-date {
            font-size: 1.2em;
            font-weight: bold;
            color: #ba55d3;
            min-width: 180px;
        }
        .countdown {
            margin-top: 10px;
            font-size: 0.95em;
            color: #9370db;
        }
        .sighting-label {
            font-size: 1.15em;
            color: #b0b0b0;
            margin-bottom: 4px;
        }
        .day-number {
            font-size: 0.9em;
            color: #9370db;
            margin-bottom: 10px;
        }
        .calendar-link {
            display: inline-block;
            margin-top: 15px;
            color: #9370db;
            text-decoration: none;
            font-size: 0.85em;
        }
        .calendar-link:hover {
            color: #ba55d3;
        }
        .share-buttons {
            margin-top: 15px;
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
        }
        .share-btn {
            background-color: #483d8b;
            color: #e0e0e0;
            border: none;
            padding: 6px 12px;
            border-radius: 5px;
            cursor: pointer;
            font-family: Georgia, serif;
            font-size: 0.75em;
            text-decoration: none;
            transition: background-color 0.2s;
        }
        .share-btn:hover {
            background-color: #6a5acd;
            color: #fff;
        }
        .share-btn.copied {
            background-color: #2e8b57;
        }
        .birthday-finder {
            background-color: #2d2d2d;
            padding: 20px;
            border-radius: 10px;
            margin: 2em 0;
            border: 2px solid #483d8b;
            text-align: center;
        }
        .birthday-finder h3 {
            color: #ba55d3;
            margin-top: 0;
            margin-bottom: 15px;
        }
        .birthday-input {
            background-color: #1a1a1a;
            border: 1px solid #483d8b;
            color: #e0e0e0;
            padding: 8px 12px;
            border-radius: 5px;
            font-family: Georgia, serif;
            font-size: 1em;
        }
        .birthday-input:focus {
            outline: none;
            border-color: #9370db;
        }
        .birthday-result {
            margin-top: 15px;
            font-size: 1.1em;
            min-height: 1.5em;
        }
        .birthday-result.found {
            color: #ba55d3;
        }
        .birthday-result.not-found {
            color: #888;
        }
        .keyboard-hint {
            font-size: 0.7em;
            color: #666;
            margin-top: 10px;
        }
        ul {
            margin: 1em 0;
        }
        li {
            margin: 0.8em 0;
        }
        strong {
            color: #ba55d3;
        }
    </style>
</head>
<body>
    <h1>The Phantom Year ðŸ‘»</h1>
    
    <p class="intro">We are currently living through a strange calendar phenomenon known as <strong>The Phantom Year</strong> (also called the <strong>Fractal Year</strong>).</p>
    
    <p>It happens when the calendar day perfectly matches the year (e.g., Jan 26, 2026).</p>
    
    <p>While these look like simple patterns, there is a hidden mathematical coincidence behind them:</p>
    
    <div class="highlight">
        <p><strong>The Math:</strong> From 2001 to 2031, this pattern repeats. If you count every single time it happens, the total is exactly <strong>365</strong>.</p>
    </div>
    
    <p>It is as if a single, extra "Phantom Year" has been cut up and scattered across the first three decades of the century. Once those 365 days are used up on December 31, 2031, the pattern disappears completely until the next century.</p>
    
    <div class="next-sighting">
        <div class="sighting-label" id="sighting-label">Next Sighting</div>
        <div class="day-number" id="day-number">Day 26 of 365</div>
        <div class="sighting-nav">
            <button class="nav-btn" id="prev-btn" onclick="navigate(-1)">&lt; <span id="prev-label">Dec 25</span></button>
            <span class="current-date" id="current-date">January 26, 2026</span>
            <button class="nav-btn" id="next-btn" onclick="navigate(1)"><span id="next-label">Feb 26</span> &gt;</button>
        </div>
        <div class="countdown" id="countdown">3 days away ðŸ‘»</div>
        <a href="calendar.html" class="calendar-link">View full calendar &rarr;</a>
        <div class="share-buttons">
            <button class="share-btn" id="share-x" onclick="shareToX()">Share on X</button>
            <button class="share-btn" id="share-fb" onclick="shareToFacebook()">Share on Facebook</button>
            <button class="share-btn" id="share-copy" onclick="copyLink()">Copy Link</button>
            <button class="share-btn" onclick="downloadIcs()">Download .ics</button>
        </div>
        <div class="keyboard-hint">Tip: Use arrow keys to navigate</div>
    </div>

    <div class="birthday-finder">
        <h3>My Phantom Birthday</h3>
        <p>Were you born on a Phantom Year date?</p>
        <input type="date" class="birthday-input" id="birthday-input" onchange="checkBirthday()" min="2001-01-01" max="2031-12-31">
        <div class="birthday-result" id="birthday-result"></div>
    </div>
    
    <h2>What Are These Dates?</h2>
    
    <p>These dates occur when the day and year create a numerical "frame" around the month.</p>
    
    <ul>
        <li><strong>Format:</strong> DD / MM / YY (where DD = YY)</li>
        <li><strong>Example:</strong> 26 / January / 26</li>
    </ul>
    
    <h2>The Finite Era (2001â€“2031)</h2>
    
    <p>This pattern is not perennial; it is a finite resource that exists only during the first 31 years of a century.</p>
    
    <ul>
        <li><strong>Start:</strong> January 1, 2001 (01/01/01)</li>
        <li><strong>End:</strong> December 31, 2031 (31/12/31)</li>
        <li><strong>The "Dark Age":</strong> From 2032 through 2099, this pattern becomes mathematically impossible because no month has more than 31 days.</li>
    </ul>
    
    <h2>The 365 Coincidence</h2>
    
    <p>The most significant mathematical finding is that when you sum every instance of this pattern across the 21st century, the total equals the exact length of a standard year.</p>
    
    <div class="highlight">
        <table style="width: 100%; border-collapse: collapse; margin: 1em 0;">
            <thead>
                <tr style="border-bottom: 2px solid #9370db;">
                    <th style="text-align: left; padding: 10px;">Period</th>
                    <th style="text-align: left; padding: 10px;">Years Included</th>
                    <th style="text-align: center; padding: 10px;">Matches Per Year</th>
                    <th style="text-align: center; padding: 10px;">Subtotal</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td style="padding: 10px;"><strong>The Stable Era</strong></td>
                    <td style="padding: 10px;">2001â€“2028 (28 years)</td>
                    <td style="text-align: center; padding: 10px;">12 (Every month)</td>
                    <td style="text-align: center; padding: 10px;">336</td>
                </tr>
                <tr>
                    <td style="padding: 10px;"><strong>The Gap Years</strong></td>
                    <td style="padding: 10px;">2029 & 2030 (2 years)</td>
                    <td style="text-align: center; padding: 10px;">11 (Skip Feb)</td>
                    <td style="text-align: center; padding: 10px;">22</td>
                </tr>
                <tr>
                    <td style="padding: 10px;"><strong>The Finale</strong></td>
                    <td style="padding: 10px;">2031 (1 year)</td>
                    <td style="text-align: center; padding: 10px;">7 (Long months only)</td>
                    <td style="text-align: center; padding: 10px;">7</td>
                </tr>
                <tr style="border-top: 2px solid #9370db; font-weight: bold;">
                    <td style="padding: 10px;" colspan="3"><strong>TOTAL</strong></td>
                    <td style="text-align: center; padding: 10px;">365</td>
                </tr>
            </tbody>
        </table>
    </div>
    
    <h2>The Mathematical Breakdown</h2>
    
    <ul>
        <li><strong>The Container:</strong> You have the 21st Century (a container of 100 years).</li>
        <li><strong>The Content:</strong> Inside that container, there are specific dates where the numbers align (Day = Year).</li>
        <li><strong>The Sum:</strong> When you collect all those scattered dates together, they add up to 365 days.</li>
    </ul>
    
    <p>So, mathematically speaking, there is exactly one standard year's worth of days hidden inside the 100-year century. It is a hidden volume of time.</p>
    
    <h2>The Fractal Year</h2>
    
    <p>In mathematics, a fractal is a shape where, if you zoom in, you see the same structure as the whole image (known as "self-similarity"). This date pattern exhibits the same property:</p>
    
    <ul>
        <li><strong>The Whole:</strong> You have the 21st Century (100 years).</li>
        <li><strong>The Part:</strong> Hidden inside that century is this specific pattern of dates (Day = Year).</li>
        <li><strong>The Fractal:</strong> When you add up all those hidden dates, they equal exactly one year (365 days).</li>
    </ul>
    
    <p>The structure of a single year is "embedded" or repeated inside the structure of the century. It's a small version of time hiding inside a larger version of timeâ€”a <strong>"Phantom Year within a Century."</strong></p>
    
    <footer style="margin-top: 3em; padding-top: 2em; border-top: 1px solid #483d8b; text-align: center; color: #888; font-size: 0.9em;">
        <p>&copy; 2026 BMW Partners LLC. All rights reserved.</p>
    </footer>

    <script>
        // Generate all Phantom Year dates (where DD = YY, from 2001-2031)
        function generatePhantomDates() {
            const dates = [];
            const monthDays = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];

            for (let year = 2001; year <= 2031; year++) {
                const yy = year - 2000; // 1-31
                for (let month = 0; month < 12; month++) {
                    // Check if this day exists in this month
                    if (yy <= monthDays[month]) {
                        dates.push(new Date(year, month, yy));
                    }
                }
            }
            return dates;
        }

        const phantomDates = generatePhantomDates();
        let currentIndex = 0;

        const monthNames = ['January', 'February', 'March', 'April', 'May', 'June',
                           'July', 'August', 'September', 'October', 'November', 'December'];
        const shortMonthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',
                                 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];

        function formatDate(date) {
            return `${monthNames[date.getMonth()]} ${date.getDate()}, ${date.getFullYear()}`;
        }

        function formatShortDate(date) {
            return `${shortMonthNames[date.getMonth()]} ${date.getDate()}`;
        }

        function findNextSightingIndex() {
            const today = new Date();
            today.setHours(0, 0, 0, 0);

            for (let i = 0; i < phantomDates.length; i++) {
                if (phantomDates[i] >= today) {
                    return i;
                }
            }
            // All dates are in the past
            return phantomDates.length - 1;
        }

        function getCountdownText(date) {
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            const target = new Date(date);
            target.setHours(0, 0, 0, 0);

            const diffTime = target - today;
            const diffDays = Math.round(diffTime / (1000 * 60 * 60 * 24));

            if (diffDays === 0) {
                return "Today! ðŸ‘»";
            } else if (diffDays === 1) {
                return "Tomorrow! ðŸ‘»";
            } else if (diffDays > 1) {
                return `${diffDays} days away ðŸ‘»`;
            } else if (diffDays === -1) {
                return "Yesterday";
            } else {
                return `${Math.abs(diffDays)} days ago`;
            }
        }

        function updateDisplay() {
            const date = phantomDates[currentIndex];
            const nextSightingIndex = findNextSightingIndex();

            // Update current date
            document.getElementById('current-date').textContent = formatDate(date);

            // Update label based on whether viewing past, present, or future
            const label = document.getElementById('sighting-label');
            if (currentIndex === nextSightingIndex) {
                label.textContent = 'Next Sighting';
            } else if (currentIndex < nextSightingIndex) {
                label.textContent = 'Past Sighting';
            } else {
                label.textContent = 'Future Sighting';
            }

            // Update countdown
            document.getElementById('countdown').textContent = getCountdownText(date);

            // Update day number
            document.getElementById('day-number').textContent = `Day ${currentIndex + 1} of 365`;

            // Update prev button
            const prevBtn = document.getElementById('prev-btn');
            const prevLabel = document.getElementById('prev-label');
            if (currentIndex > 0) {
                prevBtn.disabled = false;
                prevLabel.textContent = formatShortDate(phantomDates[currentIndex - 1]);
            } else {
                prevBtn.disabled = true;
                prevLabel.textContent = '---';
            }

            // Update next button
            const nextBtn = document.getElementById('next-btn');
            const nextLabel = document.getElementById('next-label');
            if (currentIndex < phantomDates.length - 1) {
                nextBtn.disabled = false;
                nextLabel.textContent = formatShortDate(phantomDates[currentIndex + 1]);
            } else {
                nextBtn.disabled = true;
                nextLabel.textContent = '---';
            }
        }

        function navigate(direction) {
            const newIndex = currentIndex + direction;
            if (newIndex >= 0 && newIndex < phantomDates.length) {
                currentIndex = newIndex;
                updateDisplay();
            }
        }

        // Sharing functions
        function getShareText() {
            const date = phantomDates[currentIndex];
            const dayNum = currentIndex + 1;
            const dateStr = formatDate(date);
            return `${dateStr} is Day ${dayNum} of 365 in the Phantom Year - a hidden year scattered across the century!`;
        }

        function getShareUrl() {
            return window.location.href.split('?')[0];
        }

        function shareToX() {
            const text = encodeURIComponent(getShareText());
            const url = encodeURIComponent(getShareUrl());
            window.open(`https://twitter.com/intent/tweet?text=${text}&url=${url}`, '_blank', 'width=550,height=420');
        }

        function shareToFacebook() {
            const url = encodeURIComponent(getShareUrl());
            window.open(`https://www.facebook.com/sharer/sharer.php?u=${url}`, '_blank', 'width=550,height=420');
        }

        function copyLink() {
            const text = getShareText() + ' ' + getShareUrl();
            navigator.clipboard.writeText(text).then(() => {
                const btn = document.getElementById('share-copy');
                btn.textContent = 'Copied!';
                btn.classList.add('copied');
                setTimeout(() => {
                    btn.textContent = 'Copy Link';
                    btn.classList.remove('copied');
                }, 2000);
            });
        }

        // Download .ics file
        function downloadIcs() {
            const date = phantomDates[currentIndex];
            const dayNum = currentIndex + 1;
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            const dateStamp = `${year}${month}${day}`;
            const now = new Date();
            const timestamp = now.toISOString().replace(/[-:]/g, '').split('.')[0] + 'Z';

            const icsContent = `BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//Phantom Year//EN
BEGIN:VEVENT
UID:phantom-day-${dayNum}@phantomyear
DTSTAMP:${timestamp}
DTSTART;VALUE=DATE:${dateStamp}
DTEND;VALUE=DATE:${dateStamp}
SUMMARY:Phantom Year Day ${dayNum} of 365
DESCRIPTION:${formatDate(date)} - Day ${dayNum} of 365 in the Phantom Year. A date where the day matches the year!
END:VEVENT
END:VCALENDAR`;

            const blob = new Blob([icsContent], { type: 'text/calendar' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `phantom-day-${dayNum}.ics`;
            a.click();
            URL.revokeObjectURL(url);
        }

        // Birthday finder
        function checkBirthday() {
            const input = document.getElementById('birthday-input');
            const result = document.getElementById('birthday-result');

            if (!input.value) {
                result.textContent = '';
                result.className = 'birthday-result';
                return;
            }

            const birthday = new Date(input.value + 'T00:00:00');
            const day = birthday.getDate();
            const year = birthday.getFullYear();
            const yy = year - 2000;

            // Check if it's a Phantom date (day = last two digits of year)
            if (day === yy && year >= 2001 && year <= 2031) {
                // Find which phantom day number it is
                const index = phantomDates.findIndex(d =>
                    d.getFullYear() === year &&
                    d.getMonth() === birthday.getMonth() &&
                    d.getDate() === day
                );
                if (index !== -1) {
                    result.innerHTML = `Yes! You were born on <strong>Day ${index + 1} of 365</strong> in the Phantom Year!`;
                    result.className = 'birthday-result found';
                    return;
                }
            }

            result.textContent = 'Your birthday is not a Phantom Year date, but you can still celebrate them all!';
            result.className = 'birthday-result not-found';
        }

        // Keyboard navigation
        document.addEventListener('keydown', function(e) {
            if (e.target.tagName === 'INPUT') return; // Don't interfere with input fields

            if (e.key === 'ArrowLeft') {
                e.preventDefault();
                navigate(-1);
            } else if (e.key === 'ArrowRight') {
                e.preventDefault();
                navigate(1);
            }
        });

        // Initialize on page load
        currentIndex = findNextSightingIndex();
        updateDisplay();
    </script>
</body>
</html>